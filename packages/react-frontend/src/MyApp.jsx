import React, { useState } from "react";
import Form from "./Form";
import Table from "./Table";
import React, { useState, useEffect } from "react";


function MyApp() {

  function fetchUsers() {
    const promise = fetch("http://localhost:8000/users");
    return promise;
  }

  useEffect(() => {
    fetchUsers()
      .then((res) => res.json())
      .then((json) => setCharacters(json["users_list"]))
      .catch((error) => {
        console.log(error);
      });
  }, []);


    function updateList(person) {
    setCharacters([...characters, person]);
  }


    const [characters, setCharacters] = useState([]);

    function removeOneCharacter(index) 
    {
        const updated = characters.filter((character, i) => {
            return i !== index;
        });

        setCharacters(updated);
    } 

    return (
  <div className="container">
    <Table
      characterData={characters}
      removeCharacter={removeOneCharacter}
    />
    <Form handleSubmit={updateList} />
  </div>
);



}

export default MyApp;
